(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function u(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=u(t);fetch(t.href,e)}})();class v{constructor(n,u){this.buildBoard=()=>{const{backgroundColor:i,blackTileColor:t,whiteTileColor:e,hasBackground:s,hasRing:h,hasCoordinates:x,ringColor:T,coordinateColor:y,circleInRingColor:p,baseWidth:g,borderWidth:w,ringPosition:b,imageResolution:c}=this.chess3pVariables;this.canvas.width=c,this.canvas.height=c,this.center=c/2,this.edgeLength=c/(g*16*Math.cos(30*Math.PI/180)/(g-w*2)),this.tileWidth=4*(this.edgeLength+this.xCalc()),this.tileHeight=4*this.yCalc(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.width),s&&this.drawBackground(i,c),h&&this.drawRing(T,p,c,b,g);const{canvas:m,context:f}=this.createStructureCanvas(this.tileWidth,this.tileHeight),{canvas:L,context:C}=this.createStructureCanvas(this.tileWidth,this.tileHeight);this.outlineThickness=this.edgeLength/50,this.outlineOffset=this.outlineThickness/8,this.ctx.strokeStyle=t,this.ctx.lineWidth=this.outlineThickness;for(let r=0;r<4;r++)for(let a=0;a<4;a++){const l=r*this.edgeLength+a*this.xCalc(),d=this.tileHeight-a*this.yCalc();(r+a)%2?(this.drawTile(C,l,d,e,i),this.drawTile(f,l,d,t,i)):(this.drawTile(C,l,d,t,i),this.drawTile(f,l,d,e,i))}for(let r=0;r<3;r++)this.ctx.drawImage(m,this.center,this.center-this.tileHeight),this.drawOutlineSection(),this.rotateAroundCenter(),this.ctx.drawImage(L,this.center,this.center-this.tileHeight),this.drawOutlineSection(),this.rotateAroundCenter();x&&this.drawAllCoordinates(y)},this.xCalc=()=>this.edgeLength/2,this.yCalc=()=>this.edgeLength*Math.cos(30*Math.PI/180),this.createStructureCanvas=(i,t)=>{const e=document.createElement("canvas");e.width=i,e.height=t;const s=e.getContext("2d");return{canvas:e,context:s}},this.drawTile=(i,t,e,s,h)=>{s!==h&&(i.fillStyle=s,i.beginPath(),i.moveTo(t,e),i.lineTo(t+this.xCalc(),e-this.yCalc()),i.lineTo(t+this.xCalc()+this.edgeLength,e-this.yCalc()),i.lineTo(t+this.edgeLength,e),i.closePath(),i.fill())},this.drawRing=(i,t,e,s,h)=>{this.ctx.save(),this.ctx.strokeStyle=i,this.ctx.fillStyle=t,this.ctx.lineWidth=e/600,this.ctx.beginPath(),this.ctx.arc(this.center,this.center,e*(h-s*2)/h/2,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle!==this.ctx.strokeStyle&&this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()},this.drawBackground=(i,t)=>{this.ctx.fillStyle=i,this.ctx.fillRect(0,0,t,t)},this.rotateAroundCenter=(i=60)=>{this.ctx.translate(this.center,this.center),this.ctx.rotate(i*Math.PI/180),this.ctx.translate(-this.center,-this.center)},this.drawOutlineSection=()=>{this.ctx.beginPath(),this.ctx.moveTo(this.center+4*this.xCalc()-this.outlineThickness/6,this.center-this.tileHeight-this.outlineThickness/2+this.outlineOffset),this.ctx.lineTo(this.center+4*this.xCalc()+4*this.edgeLength-this.outlineOffset,this.center-this.tileHeight-this.outlineThickness/2+this.outlineOffset),this.ctx.lineTo(4*this.edgeLength+this.center+this.outlineThickness/2-this.outlineOffset,this.center),this.ctx.lineTo(this.center+4*this.xCalc()+4*this.edgeLength-this.outlineOffset,this.center-this.tileHeight-this.outlineThickness/2+this.outlineOffset),this.ctx.closePath(),this.ctx.stroke()},this.changeChessVariable=(i,t)=>{const e=typeof this.chess3pVariables[i];typeof t===e&&(this.chess3pVariables[i]=t),this.buildBoard()},this.drawCoordinateCharacter=(i,t,e)=>{this.ctx.fillText(i,this.center-this.tileHeight+this.edgeLength/2+t-this.edgeLength/20,this.center+this.tileWidth-e)},this.drawAllCoordinates=i=>{this.rotateAroundCenter(210),this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillStyle=i,this.ctx.font=`bold ${this.edgeLength/3.5}px Roboto Slab`;for(let t=0;t<6;t++)this.coordinateData[t].split(",").forEach((e,s)=>{const h=s<4?s:7-s;!(t%2)&&(+e==6||+e==9)&&this.drawCoordinateCharacter("_",s*this.yCalc(),h*this.xCalc()-this.edgeLength/50),this.drawCoordinateCharacter(e,s*this.yCalc(),h*this.xCalc())}),this.rotateAroundCenter()},this.chess3pVariables={backgroundColor:"#E6E6D9",blackTileColor:"#024200",whiteTileColor:"#E6E6D9",hasBackground:!0,hasRing:!0,hasCoordinates:!0,ringColor:"#024200",coordinateColor:"#024200",circleInRingColor:"#E6E6D9",baseWidth:36,borderWidth:2.5,ringPosition:1,imageResolution:5550},this.coordinateData=["8,7,6,5,4,3,2,1","L,K,J,I,D,C,B,A","12,11,10,9,5,6,7,8","H,G,F,E,I,J,K,L","1,2,3,4,9,10,11,12","A,B,C,D,E,F,G,H"],this.canvas=document.createElement("canvas"),this.canvas.id=n,u.append(this.canvas),this.ctx=this.canvas.getContext("2d"),this.buildBoard()}}for(let o=0;o<10;o++)new v(`3pchess${o}`,document.body).changeChessVariable("imageResolution",1e3);
